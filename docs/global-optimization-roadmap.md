# 企业级能力梳理与后续优化路线

## 当前能力盘点
- **事件解析统一化**：前后端通过 `fastgptEvents` 模块统一识别推理、工具、知识库与用量事件，确保 FastGPT 任意新增事件都能被正常展示，并在 `EventTrail` 中进行标签化呈现。
- **思维链体验**：`ReasoningTrail` 卡片支持 Tongyi 风格的序号卡片、高亮当前步骤与折叠长链路，且在流式过程中与 SSE 解析无缝联动。
- **性能与高并发**：`AdaptiveTtlPolicy` 对 FastGPT 初始化与历史接口实施动态 TTL 策略，配合请求合并降低上游压力；`FastGPTSessionService` 统一历史与重试逻辑，便于进一步拓展分布式缓存。
- **可观测性建设**：`ObservabilityDispatcher` 支持 Elasticsearch、ClickHouse 与 HTTP 投递，可持续扩展指标监控、合规审计等企业化能力。

## 待优化事项
1. **前端性能优化**
   - 为聊天主入口引入更细粒度的懒加载与路由级代码拆分，降低首屏 `index-*.js` 体积，确保移动端也能快速进入对话界面。
   - 在 `ReasoningTrail` 和 `EventTrail` 中增加虚拟滚动或批次渲染策略，保障百步以上的思维链在弱性能终端依旧顺畅。

2. **会话治理与容错**
   - 在 `FastGPTSessionService` 外围增加熔断与重试策略，配合请求追踪 ID，提升链路的可控性与问题定位效率。
   - 扩展点赞、点踩与用户反馈接口的透传与埋点，支持企业内部的质量评估与模型迭代闭环。

3. **安全合规**
   - 引入角色/租户的权限体系，并针对敏感字段增加字段级脱敏与审计日志，满足企业数据安全要求。
   - 对阿里图片生成等外部接口统一做 SLA 监控与请求签名，避免调用被劫持或滥用。

4. **体验一致性**
   - 在语音通话、产品预览等工作台继续复用思维链与事件时间线，确保多模态场景中的反馈形态保持一致。
   - 根据用户行为数据，为思维链提供“导出报告”“复制关键步骤”等增强功能，进一步贴近通义千问等 ToB 产品体验。

## 下一步建议
- 优先完成聊天界面核心 bundle 的按需拆分与推理链虚拟化，直接缓解高并发场景下的前端性能瓶颈。
- 将 ObservabilityDispatcher 输出接入现有的监控告警体系，为后续缓存、熔断等能力提供数据支撑。
- 制定点赞/反馈数据的结构化 schema，为模型能力评估与业务团队回溯提供可查询的数据资产。
